<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="testcaseslisteners" name="testcaseslisteners" schema="schema/testcaseslisteners.exsd"/>
   <extension-point id="typechecklisteners" name="typechecklisteners" schema="schema/typechecklisteners.exsd"/>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="core.category.allrslfiles"
            name="All rsl files category">
      </category>
      <command
            categoryId="core.category.allrslfiles"
            id="core.command.typecheckall"
            name="Type check all">
      </command>
      <command
            categoryId="core.category.allrslfiles"
            id="core.command.smltranslateall"
            name="Translate all to SML">
      </command>
      <command
            categoryId="core.category.allrslfiles"
            id="core.command.runall"
            name="Run all test cases">
      </command>
      <command
            id="core.command.generatelatexforall"
            name="Generate Latex for all">
      </command>
      <command
            id="core.command.typecheckelement"
            name="Typec check">
      </command>
      <command
            id="core.command.translatetosmlelement"
            name="Translate to SML">
      </command>
      <command
            id="core.command.runtestcaseselement"
            name="Run test cases">
      </command>
      <command
            id="core.command.generatelatexelement"
            name="Generate Latex">
      </command>
      <command
            id="core.command.typecheck.activefile"
            name="Type check active file">
      </command>
      <command
            id="core.command.smltranslate.activefile"
            name="Translate to SML actiev file">
      </command>
      <command
            id="core.command.runtests.activefile"
            name="Run tests in active file">
      </command>
      <command
            id="core.command.generatelatex.activefile"
            name="Generate Latex for active file">
      </command>
      <command
            id="core.command.typecheck.activefile"
            name="Type check active file">
      </command>
      <command
            id="core.command.smltranslate.activefile"
            name="Translate to SML active file">
      </command>
      <command
            id="core.command.runtestcases.activefile"
            name="Run test case sin active file">
      </command>
      <command
            id="core.command.generatelatex.activefile"
            name="Generate Latex for active file">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="core.guihandlers.TCAllHandler"
            commandId="core.command.typecheckall">
      </handler>
      <handler
            class="core.guihandlers.SMLAllHandler"
            commandId="core.command.smltranslateall">
      </handler>
      <handler
            class="core.guihandlers.RTAllHandler"
            commandId="core.command.runall">
      </handler>
      <handler
            class="core.guihandlers.LatexAllHandler"
            commandId="core.command.generatelatexforall">
      </handler>
      <handler
            class="core.guihandlers.TCHandler"
            commandId="core.command.typecheckelement">
      </handler>
      <handler
            class="core.guihandlers.SMLHandler"
            commandId="core.command.translatetosmlelement">
      </handler>
      <handler
            class="core.guihandlers.RTHandler"
            commandId="core.command.runtestcaseselement">
      </handler>
      <handler
            class="core.guihandlers.LatexHandler"
            commandId="core.command.generatelatexelement">
      </handler>
      <handler
            class="core.guihandlers.TypeCheckActiveFile"
            commandId="core.command.typecheck.activefile">
      </handler>
      <handler
            class="core.guihandlers.SMLTranslateActiveFile"
            commandId="core.command.smltranslate.activefile">
      </handler>
      <handler
            class="core.guihandlers.RunTestCasesActiveFile"
            commandId="core.command.runtestcases.activefile">
      </handler>
      <handler
            class="core.guihandlers.GenerateLatexActiveFile"
            commandId="core.command.generatelatex.activefile">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="menu.main.rsl"
               label="RSL"
               mnemonic="S">
            <command
                  commandId="core.command.typecheckall"
                  label="Type check all"
                  style="push">
            </command>
            <command
                  commandId="core.command.smltranslateall"
                  label="Translate all to SML"
                  style="push">
            </command>
            <command
                  commandId="core.command.runall"
                  label="Run all test cases"
                  style="push">
            </command>
            <command
                  commandId="core.command.generatelatexforall"
                  label="Generate Latex for all"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
         <menu
               id="projectexplorer.contextmenu"
               label="cm">
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:projectexplorer.contextmenu?after=additions">
         <command
               commandId="core.command.typecheckelement"
               label="Type check"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="org.eclipse.core.resources.IProject">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="core.command.translatetosmlelement"
               label="Translate to SML"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="org.eclipse.core.resources.IProject">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="core.command.runtestcaseselement"
               label="Run test cases"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="org.eclipse.core.resources.IProject">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="core.command.generatelatexelement"
               label="Generate Latex"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="org.eclipse.core.resources.IProject">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.jdt.ui.ProjectExplorer?after=additions">
         <command
               commandId="core.command.typecheckelement"
               label="Type check"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="rsl">
                     </test>
                  </adapt>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="core.command.translatetosmlelement"
               label="Translate to SML"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="rsl">
                     </test>
                  </adapt>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="core.command.runtestcaseselement"
               label="Run test cases"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="rsl">
                     </test>
                  </adapt>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="core.command.generatelatexelement"
               label="Generate Latex"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.extension"
                           value="rsl">
                     </test>
                  </adapt>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="core.rsltoolbar">
            <command
                  commandId="core.command.typecheck.activefile"
                  icon="icons/13TC.png"
                  id="tcbutton"
                  label="Tc"
                  style="push"
                  tooltip="Type check active file">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="activeEditorId">
                     <equals
                           value="RSLEditor.editor.rsleditor">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="core.command.runtestcases.activefile"
                  icon="icons/13RT.png"
                  id="editor.toolbars.smlnj"
                  label="Rt"
                  style="push"
                  tooltip="Run the test cases in the active file">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="activeEditorId">
                     <equals
                           value="RSLEditor.editor.rsleditor">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="core.command.generatelatex.activefile"
                  label="LaTeX "
                  style="push"
                  tooltip="Generate latex for the active file">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="activeEditorId">
                     <equals
                           value="RSLEditor.editor.rsleditor">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
         </toolbar>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:RSLEditor.editor.rsleditor.EditorContext?after=additions">
         <command
               commandId="core.command.typecheck.activefile"
               label="Type check">
         </command>
         <command
               commandId="core.command.smltranslate.activefile"
               label="Translate to SML">
         </command>
         <command
               commandId="core.command.runtestcases.activefile"
               label="Run test cases"
               style="push">
         </command>
         <command
               commandId="core.command.generatelatex.activefile"
               label="Generate Latex"
               style="push">
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="core.command.typecheckall"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="Ctrl+Alt+C">
      </key>
      <key
            commandId="core.command.smltranslateall"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="Ctrl+Alt+M">
      </key>
      <key
            commandId="core.command.runall"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="Ctrl+Alt+F11">
      </key>
      <key
            commandId="core.command.generatelatexforall"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="Ctrl+Alt+L">
      </key>
      <key
            commandId="core.command.typecheck.activefile"
            contextId="org.eclipse.ui.contexts.dialogAndWindow"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="ALT+T">
      </key>
      <key
            commandId="core.command.smltranslate.activefile"
            contextId="org.eclipse.ui.contexts.dialogAndWindow"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="ALT+M">
      </key>
      <key
            commandId="core.command.runtestcases.activefile"
            contextId="org.eclipse.ui.contexts.dialogAndWindow"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="Alt+F1">
      </key>
      <key
            commandId="core.command.generatelatex.activefile"
            contextId="org.eclipse.ui.contexts.dialogAndWindow"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="ALT+L">
      </key>
   </extension>

</plugin>
